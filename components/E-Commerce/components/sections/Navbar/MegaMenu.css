/* ============================================
   COMPONENT: MegaMenu
   Desktop mega menu dropdown
   ============================================ */

/* ==================== CONTAINER ==================== */

.mega-menu {
	position: absolute;
	top: 100%;
	left: 0;
	right: 0;
	z-index: var(--z-dropdown);

	background-color: var(--color-white);
	border-top: 1px solid var(--color-neutral-100);
	box-shadow: 0 20px 40px -10px rgba(0, 0, 0, 0.1),
		0 10px 20px -10px rgba(0, 0, 0, 0.05);

	/* Initial state - hidden */
	opacity: 0;
	visibility: hidden;
	transform: translateY(-8px);

	transition: opacity var(--duration-normal) var(--ease-out),
		visibility var(--duration-normal) var(--ease-out),
		transform var(--duration-normal) var(--ease-out);
}

.mega-menu--active {
	opacity: 1;
	visibility: visible;
	transform: translateY(0);
}

/* ==================== HOVER BRIDGE ==================== */
/* This invisible element prevents the menu from closing when 
   moving cursor from nav link to mega menu */

.mega-menu__bridge {
	position: absolute;
	top: -20px; /* Extend above the menu */
	left: 0;
	right: 0;
	height: 20px;
	background: transparent;
}

.mega-menu__container {
	max-width: var(--max-width-container);
	margin: 0 auto;
	padding: var(--space-10) var(--space-6);
}

.mega-menu__grid {
	display: grid;
	grid-template-columns: repeat(12, minmax(0, 1fr));
	gap: var(--space-10);
}

/* ==================== HEADINGS ==================== */

.mega-menu__heading {
	margin-bottom: var(--space-6);

	font-size: var(--text-xs);
	font-weight: var(--font-bold);
	text-transform: uppercase;
	letter-spacing: var(--tracking-widest);
	color: var(--color-neutral-400);
}

/* ==================== CATEGORIES COLUMN ==================== */

.mega-menu__categories {
	grid-column: span 3;
}

.mega-menu__category-list {
	display: flex;
	flex-direction: column;
	gap: var(--space-1);
}

.mega-menu__category-item {
	opacity: 0;
	animation-fill-mode: forwards;
}

.mega-menu--active .mega-menu__category-item {
	animation-name: slideInLeft;
	animation-duration: var(--duration-normal);
	animation-timing-function: var(--ease-out);
}

.mega-menu__category-link {
	display: flex;
	align-items: center;
	gap: var(--space-3);

	padding: var(--space-2) 0;

	font-size: var(--text-sm);
	color: var(--color-neutral-600);
	text-decoration: none;

	transition: color var(--duration-normal) var(--ease-out);
}

.mega-menu__category-link:hover {
	color: var(--color-black);
}

.mega-menu__category-indicator {
	width: 0;
	height: 1px;

	background-color: var(--color-black);

	transition: width var(--duration-normal) var(--ease-out);
}

.mega-menu__category-link:hover .mega-menu__category-indicator {
	width: 12px;
}

.mega-menu__category-name {
	transition: transform var(--duration-normal) var(--ease-out);
}

.mega-menu__category-link:hover .mega-menu__category-name {
	transform: translateX(4px);
}

/* View All Link */
.mega-menu__view-all {
	display: inline-flex;
	align-items: center;
	gap: var(--space-2);

	margin-top: var(--space-8);

	font-size: var(--text-sm);
	font-weight: var(--font-semibold);
	color: var(--color-black);
	text-decoration: none;

	transition: gap var(--duration-normal) var(--ease-out);
}

.mega-menu__view-all:hover {
	gap: var(--space-4);
}

.mega-menu__view-all-icon {
	width: 16px;
	height: 16px;

	transition: transform var(--duration-normal) var(--ease-out);
}

.mega-menu__view-all:hover .mega-menu__view-all-icon {
	transform: translateX(4px);
}

/* ==================== FEATURED PRODUCTS ==================== */

.mega-menu__featured {
	grid-column: span 5;
}

.mega-menu__featured-grid {
	display: grid;
	grid-template-columns: repeat(2, 1fr);
	gap: var(--space-6);
}

.mega-menu__product-card {
	display: block;
	text-decoration: none;
	color: inherit;

	opacity: 0;
	animation-fill-mode: forwards;
}

.mega-menu--active .mega-menu__product-card {
	animation-name: fadeInUp;
	animation-duration: var(--duration-slow);
	animation-timing-function: var(--ease-out);
}

.mega-menu__product-image {
	position: relative;
	aspect-ratio: 3 / 4;

	margin-bottom: var(--space-4);

	background-color: var(--color-neutral-100);
	border-radius: var(--radius-lg);
	overflow: hidden;
}

.mega-menu__product-overlay {
	position: absolute;
	inset: 0;

	display: flex;
	align-items: center;
	justify-content: center;

	background-color: rgba(0, 0, 0, 0);

	transition: background-color var(--duration-slow) var(--ease-out);
}

.mega-menu__product-card:hover .mega-menu__product-overlay {
	background-color: rgba(0, 0, 0, 0.1);
}

.mega-menu__product-quick {
	padding: var(--space-2) var(--space-4);

	font-size: var(--text-xs);
	font-weight: var(--font-semibold);

	background-color: var(--color-white);
	color: var(--color-black);
	border-radius: var(--radius-full);

	opacity: 0;
	transform: translateY(8px);

	transition: opacity var(--duration-normal) var(--ease-out),
		transform var(--duration-normal) var(--ease-out);
}

.mega-menu__product-card:hover .mega-menu__product-quick {
	opacity: 1;
	transform: translateY(0);
}

.mega-menu__product-name {
	font-size: var(--text-sm);
	font-weight: var(--font-medium);
	color: var(--color-neutral-900);

	transition: color var(--duration-normal) var(--ease-out);
}

.mega-menu__product-card:hover .mega-menu__product-name {
	color: var(--color-black);
}

.mega-menu__product-price {
	display: flex;
	align-items: center;
	gap: var(--space-2);

	margin-top: var(--space-1);
}

.mega-menu__product-price-current {
	font-size: var(--text-sm);
	font-weight: var(--font-bold);
	color: var(--color-black);
}

.mega-menu__product-price-original {
	font-size: var(--text-xs);
	color: var(--color-neutral-400);
	text-decoration: line-through;
}

/* ==================== SALE BANNER ==================== */

.mega-menu__sale {
	grid-column: span 5;

	opacity: 0;
	animation-fill-mode: forwards;
}

.mega-menu--active .mega-menu__sale {
	animation-name: fadeInUp;
	animation-duration: var(--duration-slow);
	animation-timing-function: var(--ease-out);
	animation-delay: 100ms;
}

.mega-menu__sale-banner {
	position: relative;

	display: flex;
	flex-direction: column;
	justify-content: space-between;

	height: 100%;
	min-height: 280px;
	padding: var(--space-10);

	border-radius: var(--radius-2xl);
	overflow: hidden;

	text-decoration: none;
	color: var(--color-white);

	transition: transform var(--duration-slow) var(--ease-out);
}

.mega-menu__sale-banner:hover {
	transform: scale(1.02);
}

/* Decorations */
.mega-menu__sale-decoration {
	position: absolute;
	border-radius: var(--radius-full);

	transition: transform var(--duration-slower) var(--ease-out);
}

.mega-menu__sale-decoration--top {
	top: 0;
	right: 0;
	width: 200px;
	height: 200px;

	background-color: rgba(255, 255, 255, 0.1);

	transform: translate(50%, -50%);
}

.mega-menu__sale-banner:hover .mega-menu__sale-decoration--top {
	transform: translate(50%, -50%) scale(1.3);
}

.mega-menu__sale-decoration--bottom {
	bottom: 0;
	left: 0;
	width: 150px;
	height: 150px;

	background-color: rgba(255, 255, 255, 0.05);

	transform: translate(-50%, 50%);
}

.mega-menu__sale-banner:hover .mega-menu__sale-decoration--bottom {
	transform: translate(-50%, 50%) scale(1.3);
}

.mega-menu__sale-content {
	position: relative;
	z-index: 1;
}

.mega-menu__sale-badge {
	display: inline-block;

	padding: var(--space-1) var(--space-4);
	margin-bottom: var(--space-5);

	font-size: var(--text-xs);
	font-weight: var(--font-bold);
	text-transform: uppercase;
	letter-spacing: var(--tracking-wider);

	background-color: rgba(255, 255, 255, 0.2);
	border-radius: var(--radius-full);
	backdrop-filter: blur(4px);
}

.mega-menu__sale-discount {
	font-size: var(--text-4xl);
	font-weight: var(--font-bold);
	line-height: var(--leading-none);

	margin-bottom: var(--space-2);
}

.mega-menu__sale-title {
	font-size: var(--text-xl);

	opacity: 0.9;
}

.mega-menu__sale-description {
	font-size: var(--text-sm);

	margin-top: var(--space-3);

	opacity: 0.7;
}

.mega-menu__sale-cta {
	display: inline-flex;
	align-items: center;
	gap: var(--space-2);

	margin-top: var(--space-8);

	font-weight: var(--font-semibold);

	transition: gap var(--duration-normal) var(--ease-out);
}

.mega-menu__sale-banner:hover .mega-menu__sale-cta {
	gap: var(--space-4);
}

.mega-menu__sale-cta-icon {
	width: 20px;
	height: 20px;

	transition: transform var(--duration-normal) var(--ease-out);
}

.mega-menu__sale-banner:hover .mega-menu__sale-cta-icon {
	transform: translate(4px, -4px);
}

/* ==================== POPULAR PRODUCTS ==================== */

.mega-menu__popular {
	grid-column: span 4;
}

.mega-menu__popular-list {
	display: flex;
	flex-direction: column;
	gap: var(--space-4);
}

.mega-menu__popular-item {
	display: flex;
	align-items: center;
	gap: var(--space-4);

	padding: var(--space-3);
	margin-left: calc(var(--space-3) * -1);
	margin-right: calc(var(--space-3) * -1);

	text-decoration: none;
	color: inherit;

	border-radius: var(--radius-xl);

	opacity: 0;
	animation-fill-mode: forwards;

	transition: background-color var(--duration-normal) var(--ease-out);
}

.mega-menu--active .mega-menu__popular-item {
	animation-name: slideInRight;
	animation-duration: var(--duration-normal);
	animation-timing-function: var(--ease-out);
}

.mega-menu__popular-item:hover {
	background-color: var(--color-neutral-50);
}

.mega-menu__popular-image {
	position: relative;

	width: 64px;
	height: 64px;
	flex-shrink: 0;

	background-color: var(--color-neutral-100);
	border-radius: var(--radius-lg);
	overflow: hidden;

	transition: transform var(--duration-slow) var(--ease-out);
}

.mega-menu__popular-item:hover .mega-menu__popular-image {
	transform: scale(1.05);
}

.mega-menu__popular-info {
	flex: 1;
	min-width: 0;
}

.mega-menu__popular-name {
	font-size: var(--text-sm);
	font-weight: var(--font-medium);
	color: var(--color-neutral-900);

	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;

	transition: color var(--duration-normal) var(--ease-out);
}

.mega-menu__popular-item:hover .mega-menu__popular-name {
	color: var(--color-black);
}

.mega-menu__popular-rating {
	margin-top: var(--space-1);
}

.mega-menu__popular-price {
	margin-top: var(--space-1);

	font-size: var(--text-sm);
	font-weight: var(--font-bold);
	color: var(--color-black);
}

.mega-menu__popular-arrow {
	width: 16px;
	height: 16px;
	flex-shrink: 0;

	color: var(--color-neutral-400);

	opacity: 0;
	transform: translateX(-8px);

	transition: opacity var(--duration-normal) var(--ease-out),
		transform var(--duration-normal) var(--ease-out);
}

.mega-menu__popular-item:hover .mega-menu__popular-arrow {
	opacity: 1;
	transform: translateX(0);
}
